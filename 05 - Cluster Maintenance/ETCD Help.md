# ETCDCTL
`etcdctl` - это клиент командной строки для ETCD

Во всех наших практических занятиях Kubernetes, база данных типа "ключ-значение" ETCD развернута как static pod на мастер-узле. Используемая версия - v3

Чтобы использовать etcdctl для таких задач, как резервное копирование и восстановление, убедись, что вы установил переменную `ETCDCTL_API` в `3`.

Добиться этого можно, экспортировав переменную `ETCDCTL_API` перед использованием клиента `etcdctl`. Это можно сделать следующим образом:
```sh
export ETCDCTL_API=3
```

Чтобы увидеть все опции для подкоманды, используй флаг `-h` или `--help`

Например, если ты хочешь сделать snapshot, используй:
```sh
etcdctl snapshot save -h 
```
и запомни обязательные параметры из вывода команды
#
Поскольку у база данных ETCD включен TLS, следующие параметры являются обязательными:

`--cacert` проверяет сертификаты серверов с поддержкой TLS с CA

`--cert` идентифицировать клиента с помощью этого файла сертификата TLS

`--endpoints` = **[127.0.0.1:2379]**. Это значение по умолчанию, поскольку ETCD работает на мастере узле и доступна на `localhost:2379`

`--key` идентифицировать клиента с помощью этого файла ключа TLS
#
Аналогичным образом используйте параметр справки для восстановления из моментального снимка, чтобы увидеть все доступные параметры для восстановления резервной копии
```sh
etcdctl snapshot restore -h
```

Подробное объяснение того, как использовать инструмент `etcdctl` и работать с флагами `-h`, можно найти в видеоролике-решении лабораторой о резервном копировании и восстановлении
